!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>picEditor - 369</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#eef1f6;
    text-align:center;
}
header{
    background:#111;
    color:#fff;
    padding:18px;
    font-size:28px;
}
.box{
    background:white;
    margin:15px auto;
    padding:15px;
    width:90%;
    max-width:500px;
    border-radius:10px;
}
canvas{
    width:100%;
    border:1px solid #ccc;
    margin-top:10px;
}
button,input{
    margin:6px;
    padding:6px;
}
h2{
    margin-top:40px;
}
#clock{
    width:200px;
    height:200px;
    border:8px solid #000;
    border-radius:50%;
    position:relative;
    margin:20px auto;
}
.hand{
    position:absolute;
    width:4px;
    background:black;
    left:50%;
    bottom:50%;
    transform-origin:bottom;
}
.hour{height:50px}
.minute{height:70px}
.second{height:90px;background:red}
</style>
</head>

<body>

<header>picEditor - 369</header>

<div class="box">
<h3>Image Editor Tools</h3>
<input type="file" id="upload" accept="image/*"><br>
<canvas id="canvas"></canvas><br>

Quality:
<input type="range" id="quality" min="0.1" max="1" step="0.1" value="1"><br>

Width:
<input type="number" id="w">
Height:
<input type="number" id="h"><br>

<button onclick="resizeImg()">Resize</button>
<button onclick="addBorder()">Border</button>
<button onclick="cropImg()">Crop</button><br>

<button onclick="toJPEG()">Image → JPEG</button>
<button onclick="toPDF()">Image → PDF</button>
</div>

<h2>More to do ...</h2>

<div class="box">
<h3>Stopwatch</h3>
<p id="sw">00:00:00</p>
<button onclick="start()">Start</button>
<button onclick="stop()">Stop</button>
<button onclick="reset()">Reset</button>
</div>

<div class="box">
<h3>Full Circular Clock</h3>
<div id="clock">
<div class="hand hour" id="hr"></div>
<div class="hand minute" id="min"></div>
<div class="hand second" id="sec"></div>
</div>
</div>

<script>
let canvas=document.getElementById("canvas");
let ctx=canvas.getContext("2d");
let img=new Image();

upload.onchange=e=>{
    img.src=URL.createObjectURL(e.target.files[0]);
}

img.onload=()=>{
    canvas.width=img.width;
    canvas.height=img.height;
    ctx.drawImage(img,0,0);
    w.value=img.width;
    h.value=img.height;
}

function resizeImg(){
    canvas.width=w.value;
    canvas.height=h.value;
    ctx.drawImage(img,0,0,canvas.width,canvas.height);
}

function addBorder(){
    ctx.lineWidth=10;
    ctx.strokeRect(0,0,canvas.width,canvas.height);
}

function cropImg(){
    let data=ctx.getImageData(0,0,canvas.width/2,canvas.height/2);
    canvas.width/=2;
    canvas.height/=2;
    ctx.putImageData(data,0,0);
}

function toJPEG(){
    let link=document.createElement("a");
    link.download="image.jpeg";
    link.href=canvas.toDataURL("image/jpeg",quality.value);
    link.click();
}

function toPDF(){
    let imgData=canvas.toDataURL("image/jpeg");
    let w=window.open("");
    w.document.write("<img src='"+imgData+"' width='100%'>");
    w.print();
}

/* Stopwatch */
let t=0,int;
function start(){
    if(!int){
        int=setInterval(()=>{
            t++;
            let h=String(Math.floor(t/3600)).padStart(2,"0");
            let m=String(Math.floor((t%3600)/60)).padStart(2,"0");
            let s=String(t%60).padStart(2,"0");
            sw.innerText=`${h}:${m}:${s}`;
        },1000);
    }
}
function stop(){clearInterval(int);int=null;}
function reset(){stop();t=0;sw.innerText="00:00:00";}

/* Clock */
setInterval(()=>{
    let d=new Date();
    sec.style.transform=`rotate(${d.getSeconds()*6}deg)`;
    min.style.transform=`rotate(${d.getMinutes()*6}deg)`;
    hr.style.transform=`rotate(${d.getHours()*30}deg)`;
},1000);
</script>

</body>
</html
